---
description: >-
  前一小节我们看到，业界已经有非常多的微服务框架了，那我们是不是可以拿来就用就可以了呢？理论上，我们根据团队技术栈选择一个比较符合的微服务框架之后，再适当做些协议编解码、日志、监控等组件的扩展应该就可以用起来了。列出的流行的微服务框架，也有专门的团队维护、生态相对来说也很健康。那我们似乎没有什么理由不选择这些开源项目？这也未必。
---

# 自研微服务框架

一个体量很大的公司，比如BAT、ByteDance这种级别的，公司内部的研发人员可能涉及了各种各样的技术栈，CC++、Java、Go、Python、JavaScript、Rust、Ruby、PHP……如果统筹规划一个多语言版本的框架服务于不同技术栈的同学，那是极好的，但是确实需要很大的魄力才能推动这个事情最终落地。

更可能的选择是，不同技术栈的同学选择各自不同的微服务框架，比如Go Micro、Spring Boot、BRpc等，然后针对这些框架分别定制化一些插件，以对接公司业务不同的日志平台、监控平台等。这样看上去节省了人力，但是时间长了以后，未必会省人力。

考虑下不同技术栈的同学之间可能会涉及到服务交接，如工程团队小A同学交接了一批Java服务给小B同学，但是小B主要技术栈是Go，可能会想为什么不交接给懂Java的同学，anyway，这样的情况总会发生的。实际影响就是熟悉这些框架耗费人力、修改维护也比较困难。

还有就是使用了未经统一规划的框架，很可能在框架能力、插件生态上也没有完全对齐，有可能Java选择的微服务框架使用监控系统A，但是Go选择的微服务框架使用监控系统B。这样交接一个Java服务给Go开发同学，由于监控等运营系统的变更，很可能使用起来不习惯或者需要重新对接熟悉的监控系统。

不难理解，这样的情况多了之后，会直接导致研发效率的下降。

腾讯从去年开始发起了技术治理，其中有一项就是统一微服务框架（tRPC），目前内部开源但是未对外开源。令人可喜的一点就是，不同编程语言的框架开发小组，从框架设计之初就在一起设计、讨论、pk，框架整体架构是大致一致的、网络通信都是遵循rpc方式、框架配置等等都是非常接近的，这意味着服务交接不再是一个困难的问题，甚至给了很多同学一种动力想去深入了解下其他语言框架的实现细节，这也无形中为我们更好地培养社区、协同共建做了一些铺垫。

需不需要自研微服务框架，很多人会将其归类到“重复造轮子”的范畴，算是也不算是。试想，一个宝马X5的轮子，能算是杜卡迪大魔鬼的轮子吗？轮子不合适再造一个也无妨。再造的目的就是让它更符合团队技术栈需要，提高研发、运营效率，提高运营质量，归根结底还是对业务负责。

所以，既然可以明确轮子不合适，那我也并不很在意重新造一个 :\)



